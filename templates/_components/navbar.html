{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<nav class="rc-navbar">
  <div class="rc-navbar-inner">
    <a class="rc-logo" href="{% url 'home' %}">Consultorio Dental <span>RC</span></a>

    <div class="nav-right">
        <ul class="rc-menu">
          <li><a href="{% url 'home' %}#servicios">{% trans "Servicios" %}</a></li>
          <li><a href="{% url 'home' %}#acerca">{% trans "Acerca" %}</a></li>
          <li><a href="{% url 'home' %}#pagos">{% trans "Pagos" %}</a></li>
          <li><a href="{% url 'home' %}#contacto">{% trans "Contacto" %}</a></li>
        </ul>

        <div class="nav-actions">
          <a class="rc-btn rc-btn--ghost" href="{% url 'accounts:login' %}">{% trans "Iniciar sesión" %}</a>
          <a class="rc-btn rc-btn--primary rc-btn--glow" href="{% url 'accounts:register' %}">{% trans "Agenda tu cita" %}</a>

          <div class="lang-switch">
              <form action="{% url 'set_language' %}" method="post">
                  {% csrf_token %}
                  <input name="next" type="hidden" value="/">
                  <input name="language" type="hidden" value="es">
                  <button type="submit" class="lang-flag {% if CURRENT_LANG|slice:':2' == 'es' %}active{% endif %}" aria-label="Español">
                      <span class="flag flag-mx"></span>
                  </button>
              </form>
              
              <form action="{% url 'set_language' %}" method="post">
                  {% csrf_token %}
                  <input name="next" type="hidden" value="{{ request.get_full_path }}">
                  <input name="language" type="hidden" value="en">
                  <button type="submit" class="lang-flag {% if CURRENT_LANG|slice:':2' == 'en' %}active{% endif %}" aria-label="English">
                      <span class="flag flag-us"></span>
                  </button>
              </form>
          </div>

          <button class="rc-burger" id="burger" aria-label="Abrir menú">
            <i class="ph-bold ph-list"></i>
          </button>
        </div>
    </div>
  </div>
</nav>

<div class="rc-mobile-panel" id="mobile-panel">
  <a href="{% url 'home' %}#servicios">{% trans "Servicios" %}</a>
  <a href="{% url 'home' %}#acerca">{% trans "Acerca" %}</a>
  <a href="{% url 'home' %}#pagos">{% trans "Pagos" %}</a>
  <a href="{% url 'home' %}#contacto">{% trans "Contacto" %}</a>
  <hr class="rc-mobile-divider">
  <a class="rc-btn rc-mobile-btn" href="{% url 'accounts:login' %}">{% trans "Iniciar sesión" %}</a>
  <a class="rc-btn rc-btn--primary rc-mobile-btn" href="{% url 'accounts:register' %}">{% trans "Agenda tu cita" %}</a>
  <div class="lang-simple" style="margin-top:1rem;">
      <form action="{% url 'set_language' %}" method="post">
          {% csrf_token %}
          <input name="next" type="hidden" value="/">
          <input name="language" type="hidden" value="es">
          <button type="submit" class="lang-link {% if CURRENT_LANG|slice:':2' == 'es' %}active{% endif %}">
              <span class="flag flag-mx"></span>
          </button>
      </form>
      <form action="{% url 'set_language' %}" method="post">
          {% csrf_token %}
          <input name="next" type="hidden" value="{{ request.get_full_path }}">
          <input name="language" type="hidden" value="en">
          <button type="submit" class="lang-link {% if CURRENT_LANG|slice:':2' == 'en' %}active{% endif %}">
              <span class="flag flag-us"></span>
          </button>
      </form>
  </div>
</div>
