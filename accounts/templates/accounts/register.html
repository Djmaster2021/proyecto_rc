{% load static %}
<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Crear cuenta — RC</title>
  <link rel="icon" href="{% static 'img/favicon.png' %}" type="image/png">
  <link rel="stylesheet" href="{% static 'accounts/styles.css' %}">
</head>
<body>
  <!-- Topbar con switch de tema -->
  <header class="site-topbar">
    <a class="brand" href="#" aria-label="Rodolfo Castellón">RC</a>
    <div class="theme-toggle" id="themeToggle">
      <input type="radio" name="t" id="t-light" value="light" checked>
      <label class="toggle-chip" for="t-light">Claro</label>
      <input type="radio" name="t" id="t-dark" value="dark">
      <label class="toggle-chip" for="t-dark">Oscuro</label>
    </div>
  </header>

  <main class="site-main">
    <section class="auth-hero">
      <div class="glow-card">
        <div class="login-card">
          <div class="card-head">
            <div class="logo">RC</div>
            <h1 class="title">Crear cuenta</h1>
            <p class="subtitle">Regístrate para agendar y gestionar tus citas</p>
          </div>

          <form method="post" class="auth-form" action="{% url 'accounts:register' %}">
            {% csrf_token %}

            <div class="field">
              <label for="id_username" class="muted">Usuario</label>
              <input id="id_username" class="input" type="text" name="username"
                     required maxlength="150" autocomplete="username"
                     placeholder="ej. juanperez">
            </div>

            <div class="field">
              <label for="id_email" class="muted">Correo (opcional)</label>
              <input id="id_email" class="input" type="email" name="email"
                     autocomplete="email" placeholder="ej. juan@correo.com">
            </div>

            <div class="field">
              <label for="id_password1" class="muted">Contraseña</label>
              <input id="id_password1" class="input" type="password" name="password1"
                     required autocomplete="new-password" placeholder="Mínimo 8 caracteres">
            </div>

            <div class="field" style="margin-bottom:.5rem;">
              <label for="id_password2" class="muted">Repite contraseña</label>
              <input id="id_password2" class="input" type="password" name="password2"
                     required autocomplete="new-password">
            </div>

            <!-- Rol -->
            <div class="role-switch" style="margin-bottom:.75rem;">
              <input type="radio" id="reg-pac" name="role" value="paciente" {% if role != 'dentista' %}checked{% endif %}>
              <label for="reg-pac">Paciente</label>

              <input type="radio" id="reg-dent" name="role" value="dentista" {% if role == 'dentista' %}checked{% endif %}>
              <label for="reg-dent">Dentista</label>
            </div>

            <button class="btn btn-primary w-100" type="submit">Crear cuenta</button>

            {% if messages %}
              <ul style="margin-top:.75rem; padding-left:16px; color:#c0392b;">
                {% for m in messages %}
                  <li>{{ m }}</li>
                {% endfor %}
              </ul>
            {% endif %}

            <p class="form-meta" style="margin-top:1rem;">
              ¿Ya tienes una cuenta?
              <a class="link" href="{% url 'accounts:login' %}">Inicia sesión</a>
            </p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">© Consultorio Rodolfo Castellón</footer>
  <script src="{% static 'accounts/app.js' %}"></script>
</body>
</html>
