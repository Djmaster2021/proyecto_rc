{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <!-- ================================
         META & CONFIGURACIÓN BÁSICA
    ================================= -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{% block ptitle %}Consultorio RC{% endblock %}</title>

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos globales del módulo Paciente -->
    <link rel="stylesheet" href="{% static 'paciente/styles.css' %}" />

    <!-- Espacio para CSS adicional por página -->
    {% block extra_css %}{% endblock %}
</head>

<body class="dark-mode">
    <!-- =====================================================================
         TOPBAR / BARRA SUPERIOR
         Esta barra es fija y aparece en todas las vistas del módulo paciente.
    ====================================================================== -->
    <header class="topbar">
        <div class="topbar__inner">
            <!-- Nombre del consultorio -->
            <a href="/" class="brand">
              Consultorio Dental RC
            </a>

            <!-- Texto central, cambia según la vista -->
            <div class="center-title">
                {% block header_title %}Paciente{% endblock %}
            </div>

            <!-- Acción de cerrar sesión -->
            <div class="right-actions">
                <form
                    action="{% url 'accounts:logout' %}"
                    method="post"
                    style="display:inline;"
                >
                    {% csrf_token %}
                    <button type="submit" class="btn-logout">
                        Cerrar sesión
                    </button>
                </form>
            </div>
        </div>
    </header>

    <!-- ========================================================
         BANNER DE PENALIZACIÓN (si aplica)
         Se muestra automáticamente si la vista manda penalizacion_info.
    ========================================================= -->
    {# Banner global de penalización removido (se muestra solo en la vista de pagos) #}

    <!-- ========================================================
         SISTEMA GLOBAL DE ALERTAS - TARJETAS TIPO TOAST
         (mensajes de éxito/error con auto-desvanecimiento)
    ========================================================= -->
    <div id="toast-container">
        <!-- Las tarjetas se insertarán dinámicamente desde JS -->
    </div>

    <!-- ========================================================
         CONTENIDO PRINCIPAL DE CADA PÁGINA
    ========================================================= -->
    <main class="main-container">
        {% block pcontent %}{% endblock %}
    </main>

    <!-- ========================================================
         MODAL GLOBAL (genérico)
         Puede ser utilizado por distintas vistas.
    ========================================================= -->
    <div id="modal" class="modal-backdrop" hidden>
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="modal-title" class="modal-title"></h3>
                <button class="modal-close" id="modalCloseBtn">✕</button>
            </header>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <!-- ========================================================
         SCRIPTS GENERALES
    ========================================================= -->
    <script src="{% static 'paciente/app.js' %}" defer></script>

    <!-- Scripts extra por vista -->
    {% block extra_js %}{% endblock %}
</body>
</html>
