/* ===== Layout con sidebar + contenido ===== */
.layout { display:flex; min-height:100dvh; }
.content-wrap { flex:1; display:flex; flex-direction:column; min-width:0; background:#f7f8fa; }
.topbar { display:flex; align-items:center; gap:.75rem; padding:1rem 1.25rem; background:#fff; border-bottom:1px solid #1c2731; position:sticky; top:0; z-index:10; }
.page-title { margin:0; font-size:1.25rem; }
.main-content { padding:1.25rem; }

/* ===== Sidebar ===== */
.sidebar { width:220px; background:#3c5070; color:#ecf0f1; padding:1rem; flex-shrink:0; position:sticky; top:0; height:100vh; overflow:auto; }
.sidebar-title { font-size:1.2rem; font-weight:700; margin:0 0 1rem; text-align:center; }
.sidebar-nav ul{ list-style:none; margin:0; padding:0; }
.sidebar-nav li{ margin-bottom:.5rem; }
.sidebar-nav a{ display:flex; align-items:center; gap:.6rem; text-decoration:none; color:#ecf0f1; padding:.6rem .75rem; border-radius:8px; line-height:1; transition:background .2s,color .2s; }
.sidebar-nav a:hover{ background:#34495e; }
.sidebar-nav a.is-active{ background:#1abc9c; color:#0f2d2a; font-weight:600; }

/* ===== Hamburguesa / Drawer ===== */
.burger{ display:none; border:0; background:transparent; cursor:pointer; padding:.35rem .5rem; border-radius:8px; font-size:1.25rem; }
.burger:focus-visible{ outline:2px solid #1abc9c; }
.backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:60; }

@media (max-width:1023px){
  .burger{ display:inline-flex; align-items:center; justify-content:center; }
  .sidebar{
    position:fixed; left:-260px; top:0; bottom:0; height:100vh; z-index:70;
    box-shadow:0 10px 30px rgba(0,0,0,.25); transition:left .25s ease;
  }
  .sidebar.open{ left:0; }
  html.no-scroll, html.no-scroll body{ overflow:hidden; }
}

/* ===== Utilidades para vistas (sin chocar con site.css) ===== */
.table-wrap, .pg-table-wrap{ overflow:auto; border-radius:8px; }
.grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(260px,1fr)); gap:1rem; }

/* ===== Ajustes de grids internos en vistas cuando el ancho baja ===== */
@media (max-width:1200px){
  .ag-scope .ag-grid,
  .pt-scope .pt-kpis,
  .pg-scope .pg-grid{ grid-template-columns:1fr !important; }
  .pg-scope .pg-chart-wrap{height:260px}

}

/* ====== Responsive core (añadir al final) ====== */

/* Tipografía y contenedor fluidos */
:root{
  --container-max: 1200px;
  --space: clamp(.75rem, 2vw, 1.25rem);
  --fs-base: clamp(14px, 1.2vw, 16px);
  --fs-sm: clamp(12px, .9vw, 14px);
  --fs-lg: clamp(16px, 1.6vw, 20px);
}
*{ box-sizing: border-box; min-width: 0; }
html{ font-size:100%; }
body{ font-size: var(--fs-base); line-height:1.5; }
.container{ width:min(100% - 2*var(--space), var(--container-max)); margin-inline:auto; }

/* Utilidades anti-overflow */
.u-wrap{ overflow-wrap:anywhere; word-break:break-word; }
.u-ellipsis{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Grids fluidos (mejora de .grid existente) */
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(min(100%,260px), 1fr));
  gap:1rem;
}
.grid > *{ min-width:0; } /* clave para que hijos no desborden */

/* Tablas: scroll suave y apilable opcional */
.table-wrap, .pg-table-wrap{ overflow:auto; border-radius:8px; -webkit-overflow-scrolling:touch; }
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{ padding:.6rem .8rem; vertical-align:top; }
.table td, .table th{ max-width:24ch; }
.table td{ overflow-wrap:anywhere; }

/* Modo apilado: aplica a <table class="table table--stack"> */
@media (max-width:700px){
  .table--stack thead{ display:none; }
  .table--stack, .table--stack tbody, .table--stack tr, .table--stack td{ display:block; width:100%; }
  .table--stack tr{ border:1px solid #e5e7eb; border-radius:8px; padding:.4rem; margin-block:.6rem; }
  .table--stack td{ display:grid; grid-template-columns: 10ch 1fr; gap:.5rem; align-items:start; }
  .table--stack td::before{
    content: attr(data-label);
    font-weight:600; color:#374151; white-space:nowrap;
  }
}

/* Gráficas 100% responsive (Chart.js/ECharts/Apex) */
.chart-wrap{
  width:100%;
  aspect-ratio:16/9;     /* controla alto sin fijarlo */
  max-height:70vh;
}
.chart-wrap > canvas,
.chart-wrap > div{ width:100% !important; height:100% !important; }

/* Agenda: vista semanal desplazable en móviles sin romper */
@media (max-width:900px){
  .ag-scope .ag-board{ overflow:auto; }
  .ag-scope .ag-board-head,
  .ag-scope .ag-grid{ min-width: 860px; } /* evita colapso de columnas */
}

/* Mantén tu regla para colapsar grids internos */
@media (max-width:1200px){
  .ag-scope .ag-grid,
  .pt-scope .pt-kpis,
  .pg-scope .pg-grid{ grid-template-columns:1fr !important; }
  .pg-scope .pg-chart-wrap{height:260px}

}

/* Accesibilidad: respeta reduce motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}
