{% extends "dentista/base.html" %}
{% load static %}

{% block dtitle %}Agenda – Vista Día{% endblock %}

{% block dcontent %}

<!-- ============================================
     AGENDA DEL DÍA
     Vista centrada para gestión rápida
============================================ -->

<div class="page-header">
    <h1 class="text-gradient">Agenda del {{ fecha|date:"l d F" }}</h1>

    <div class="header-actions">
        <a href="{% url 'dentista:agenda_modo' 'semana' %}" class="cyber-btn">Semana</a>
        <a href="{% url 'dentista:agenda_modo' 'mes' %}" class="cyber-btn">Mes</a>
    </div>
</div>


<!-- =======================
     BLOQUES DE HORAS
======================= -->
<div class="agenda-grid-day">

    {% for slot in slots %}
    <div class="agenda-slot {% if slot.estado == 'ocupado' %}slot-ocupado{% else %}slot-libre{% endif %}">
        
        <div class="slot-hora">{{ slot.hora }}</div>

        {% if slot.estado == "ocupado" %}
            {% for c in citas %}
                {% if c.hora_inicio|time:"H:i" == slot.hora %}
                <div class="slot-cita">
                    <strong>{{ c.paciente.nombre }}</strong>
                    <span>{{ c.servicio.nombre }}</span>
                </div>
                {% endif %}
            {% endfor %}
        {% else %}
        <a class="slot-libre-btn" href="#">
            Disponible
        </a>
        {% endif %}

    </div>
    {% endfor %}

</div>

{% endblock %}
