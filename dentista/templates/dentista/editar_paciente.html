{% extends "dentista/base.html" %}
{% load static %}

{% block dtitle %}Editar Paciente | RC{% endblock %}

{% block dcontent %}

<div class="page-header">
    <h1 class="text-gradient">Editar Expediente</h1>
    <p class="welcome-subtitle">Actualizando datos de: <strong>{{ paciente.nombre }}</strong></p>
</div>

<div class="cyber-card" style="max-width: 800px; margin: 0 auto; padding: 2rem;">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="row-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label class="form-label">Nombre Completo *</label>
                <input type="text" name="nombre" class="form-control" value="{{ paciente.nombre }}" required>
            </div>

            <div class="form-group">
                <label class="form-label">Teléfono</label>
                <input type="tel" name="telefono" class="form-control" value="{{ paciente.telefono }}" inputmode="numeric" maxlength="10" minlength="10" required title="Ingresa 10 dígitos numéricos">
            </div>

            <div class="form-group">
                <label class="form-label">Fecha de Nacimiento</label>
                <input type="date" name="fecha_nacimiento" class="form-control" value="{{ paciente.fecha_nacimiento|date:'Y-m-d' }}">
            </div>

            <div class="form-group">
                <label class="form-label">Cambiar Foto</label>
                <input type="file" name="imagen" class="form-control" accept="image/*">
                {% if paciente.imagen %}
                    <small style="color: #666;">Actualmente: <a href="{{ paciente.imagen.url }}" target="_blank">Ver foto</a></small>
                {% endif %}
            </div>
        </div>

        <div class="form-group" style="margin-top: 15px;">
            <label class="form-label">Dirección</label>
            <input type="text" name="direccion" class="form-control" value="{{ paciente.direccion }}">
        </div>

        <div class="form-group" style="margin-top: 15px;">
            <label class="form-label">Antecedentes Médicos</label>
            <textarea name="antecedentes" class="form-control" rows="3">{{ paciente.antecedentes }}</textarea>
        </div>

        <div style="margin-top: 2rem; text-align: right; display: flex; gap: 10px; justify-content: flex-end;">
            <a href="{% url 'dentista:pacientes' %}" class="cyber-btn cyber-btn-secondary">Cancelar</a>
            <button type="submit" class="cyber-btn cyber-btn-glow">Actualizar Datos</button>
        </div>
    </form>
</div>
{% endblock %}
